---
title: Yup Validation Example
description: Yup validation example with client and server-side validation
---

import { Tabs } from 'nextra/components';
import YupFormExample from './YupFormExample';
import Example from '@/components/Example';

# Yup Validation Example (obsolete)

Form input handling and [Yup](https://yup-docs.vercel.app/) validation with [vovk-yup](https://www.npmjs.com/package/vovk-yup). The request input is validated on the client-side with [vovk-ajv](https://www.npmjs.com/package/vovk-ajv) before being sent to the server where it is validated again with Yup.

## Result

<Example>
  <YupFormExample />
</Example>

## Code

<Tabs items={['UserYupController.ts', 'YupFormExample.tsx']}>
  <Tabs.Tab>
```ts showLineNumbers copy filename="src/modules/yup/UserYupController.ts" repository="finom/vovk-examples"
import * as yup from 'yup';
import { prefix, post, operation, type VovkOutput } from 'vovk';
import { withYup } from 'vovk-yup';

@prefix('users-yup')
export default class UserYupController {
  @operation({
    summary: 'Update user (Yup)',
    description: 'Update user by ID with Yup validation',
  })
  @post('{id}')
  static updateUser = withYup({
    body: yup
      .object()
      .required()
      .shape({
        name: yup.string().required().meta({ description: 'User full name' }),
        age: yup.number().min(0).max(120).required().meta({ description: 'User age' }),
        email: yup.string().email().required().meta({ description: 'User email' }),
      })
      .meta({ description: 'User object' }),
    params: yup
      .object()
      .shape({
        id: yup.string().required().meta({ description: 'User ID' }),
      })
      .required(),
    query: yup
      .object()
      .shape({
        notify: yup.string().oneOf(['email', 'push', 'none']).required().meta({ description: 'Notification type' }),
      })
      .required(),
    output: yup
      .object()
      .shape({
        success: yup.boolean().required().meta({ description: 'Success status' }),
      })
      .meta({ description: 'Response object' })
      .required(),
    async handle(req, { id }) {
      const { name, age } = await req.json();
      const notify = req.nextUrl.searchParams.get('notify');

      // do something with the data
      console.log(`Updating user ${id}:`, { name, age, notify });
      return {
        success: true,
      } satisfies VovkOutput<typeof UserYupController.updateUser>;
    },
  });
}
```
*[The code above is fetched from GitHub repository.](https://github.com/finom/vovk-examples/blob/main/src/modules/yup/UserYupController.ts)*`
*[The code above is fetched from GitHub repository.](https://github.com/finom/vovk-examples/blob/main/src/modules/yup/UserYupController.ts)*
  </Tabs.Tab>
  <Tabs.Tab>
```tsx showLineNumbers copy filename="src/app/yup/YupFormExample.tsx" repository="finom/vovk-examples"
'use client';
import { useState, type FormEvent } from 'react';
import { UserYupRPC } from '@/client';
import type { VovkReturnType } from 'vovk';

export default function YupFormExample() {
  const [response, setResponse] = useState<VovkReturnType<typeof UserYupRPC.updateUser> | null>(null);
  const [error, setError] = useState<Error | null>(null);
  const [name, setName] = useState('');
  const [email, setEmail] = useState('');
  const [age, setAge] = useState(30);
  const [disableClientValidation, setDisableClientValidation] = useState(false);
  const onSubmit = async (e: FormEvent<HTMLFormElement>) => {
    e.preventDefault();
    try {
      setResponse(
        await UserYupRPC.updateUser({
          body: { name, email, age },
          query: { notify: 'push' },
          params: { id: '5a279068-35d6-4d67-94e0-c21ef4052eea' },
          disableClientValidation,
        })
      );
      setError(null);
    } catch (e) {
      setError(e as Error);
      setResponse(null);
    }
  };

  return (
    <form onSubmit={onSubmit}>
      <input type="text" placeholder="Name" value={name} onChange={(e) => setName(e.target.value)} />
      <input type="text" placeholder="Email" value={email} onChange={(e) => setEmail(e.target.value)} />
      <label>Age:</label>
      <input type="number" placeholder="Age" value={age} onChange={(e) => setAge(e.target.valueAsNumber)} />
      <label className="block mb-4">
        <input
          type="checkbox"
          className="mr-2"
          checked={disableClientValidation}
          onChange={(e) => setDisableClientValidation(e.target.checked)}
        />
        Disable client-side validation
      </label>
      <button>Submit</button>

      {response && (
        <div className="text-left">
          <h3>Response:</h3>
          <pre>{JSON.stringify(response, null, 2)}</pre>
        </div>
      )}

      {error && <div className="overflow-auto">‚ùå {String(error)}</div>}
    </form>
  );
}

```
*[The code above is fetched from GitHub repository.](https://github.com/finom/vovk-examples/blob/main/src/app/yup/YupFormExample.tsx)*`

_[The code above is fetched from GitHub repository.](https://github.com/finom/vovk-examples/blob/main/src/app/yup/YupFormExample.tsx)_

  </Tabs.Tab>
</Tabs>

## Related Documentation

- [Validation](https://vovk.dev/validation/introduction)
- [Validation with Yup](https://vovk.dev/validation/yup)
- [Client-side Validation](https://vovk.dev/validation/client)
- [TypeScript RPC](https://vovk.dev/typescript)
- [Controller](https://vovk.dev/controller)
- [`@operation` Decorator](https://vovk.dev/openapi)
